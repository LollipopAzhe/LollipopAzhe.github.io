<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Chapter03-数据链路层 | Azhe</title><meta name="keywords" content="计算机网络"><meta name="author" content="Azhe"><meta name="copyright" content="Azhe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="概述 数据链路层使用的信道 点对点信道 使用一对一的点对点通信方式   广播信道。 使用一对多的广播通信方式，过程比较复杂。 连接的主机很多，因此必须使用专用的共享信道协议来协调这些数据发送数据。     两台主机通过互联网进行通信时数据链路层所处的地位 H1与H2通过路由器进行通信    H1到H2所经过的网路可以是多种的。 从层次上来看数据的流动   只考虑数据在数据链路层的流动      3">
<meta property="og:type" content="article">
<meta property="og:title" content="Chapter03-数据链路层">
<meta property="og:url" content="https://lollipopazhe.github.io/2021/10/17/study/network/chapter03/index.html">
<meta property="og:site_name" content="Azhe">
<meta property="og:description" content="概述 数据链路层使用的信道 点对点信道 使用一对一的点对点通信方式   广播信道。 使用一对多的广播通信方式，过程比较复杂。 连接的主机很多，因此必须使用专用的共享信道协议来协调这些数据发送数据。     两台主机通过互联网进行通信时数据链路层所处的地位 H1与H2通过路由器进行通信    H1到H2所经过的网路可以是多种的。 从层次上来看数据的流动   只考虑数据在数据链路层的流动      3">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2021-10-17T11:26:32.000Z">
<meta property="article:modified_time" content="2022-10-10T08:48:22.663Z">
<meta property="article:author" content="Azhe">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/lollipop.png"><link rel="canonical" href="https://lollipopazhe.github.io/2021/10/17/study/network/chapter03/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":null,"messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Azhe","link":"链接: ","source":"来源: Azhe","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Chapter03-数据链路层',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-10 16:48:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s1.ax1x.com/2022/10/11/xtHdw4.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Azhe</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/images/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Chapter03-数据链路层</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-17T11:26:32.000Z" title="发表于 2021-10-17 19:26:32">2021-10-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-10T08:48:22.663Z" title="更新于 2022-10-10 16:48:22">2022-10-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/">学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/study/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Chapter03-数据链路层"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul>
<li>数据链路层使用的信道<ol>
<li>点对点信道<ul>
<li>使用一对一的点对点通信方式</li>
</ul>
</li>
<li>广播信道。<ul>
<li>使用一对多的广播通信方式，过程比较复杂。</li>
<li>连接的主机很多，因此必须使用专用的共享信道协议来协调这些数据发送数据。</li>
</ul>
</li>
</ol>
</li>
<li>两台主机通过互联网进行通信时数据链路层所处的地位<ul>
<li>H1与H2通过路由器进行通信<br>  <img src="https://z3.ax1x.com/2021/10/12/5mLtJO.png" alt="H1与H2通过路由器进行通信"><br>  H1到H2所经过的网路可以是多种的。</li>
<li>从层次上来看数据的流动<br>  <img src="https://z3.ax1x.com/2021/10/12/5mL7kV.png" alt="数据链路层的地位"></li>
<li>只考虑数据在数据链路层的流动<br>  <img src="https://z3.ax1x.com/2021/10/12/5mO11g.png" alt="只考虑数据在数据链路层的流动"></li>
</ul>
</li>
</ul>
<h2 id="3-1-使用点对点信道的数据链路层"><a href="#3-1-使用点对点信道的数据链路层" class="headerlink" title="3.1 使用点对点信道的数据链路层"></a>3.1 使用点对点信道的数据链路层</h2><h3 id="3-1-1-数据链路和帧"><a href="#3-1-1-数据链路和帧" class="headerlink" title="3.1.1 数据链路和帧"></a>3.1.1 数据链路和帧</h3><ul>
<li>链路：从一个结点到++相邻结点++的一段物理链路，中间无交换站点。++(物理链路)++{.wavy}</li>
<li>数据链路：把实现控制数据传输的通信协议的硬件和软件++(网络适配器)++{.wavy}加到链路，就构成了数据链路。++(逻辑链路&#x3D;物理链路+协议)++{.wavy}</li>
<li>帧：点对点信道的数据链路层的协议数据单元。</li>
<li>数据链路层的任务<ol>
<li>把网络层交下来数据++(网络层协议数据单元IP数据报)++{.wavy}的++构成帧++{.wavy}发送到链路上。</li>
<li>把接收到的帧中的数据取出并上交给网络层</li>
</ol>
<ul>
<li>三层简化模型<br>  <img src="https://z3.ax1x.com/2021/10/12/5mzGTA.png" alt="三层简化模型"></li>
<li>只考虑数据链路层<br>  <img src="https://z3.ax1x.com/2021/10/12/5mzWlT.png" alt="只考虑数据链路层"></li>
</ul>
</li>
<li>点对点信道的数据链路层在进行通信时的主要步骤<ol>
<li>结点A的数据链路层把网络层交下来的IP数据报天骄首部和尾部封装成帧。</li>
<li>结点A把封装好的帧发送给结点B。</li>
<li>若结点B的数据链路层收到的帧无差错，则从接收到的帧中提取出数据报上交给网络层；否则丢弃。</li>
</ol>
</li>
</ul>
<h3 id="3-1-2-三个基本问题"><a href="#3-1-2-三个基本问题" class="headerlink" title="3.1.2 三个基本问题"></a>3.1.2 三个基本问题</h3><ol>
<li>封装成帧<ul>
<li>在一段数据（IP数据报）的前后分别加上首部和尾部</li>
<li>首部和尾部的重要作用就是++帧定界++{.wavy}。</li>
<li>为了提高帧的传输效率，帧的数据部分要尽可能大于首部和尾部的长度</li>
<li>每一种链路层协议都规定了所能传送的帧的数据部分上限长度——&#x3D;&#x3D;最大传送单元MTU(Maximum Transfer Unit)&#x3D;&#x3D;<br>  <img src="https://z3.ax1x.com/2021/10/12/5niAeO.png" alt="封装成帧"></li>
<li>当数据是由ASCII码组成的文本文件时，帧定界可以使用特殊的++帧定界符。++<ul>
<li>帧开始符SOH作为帧的首部开始：01（十六进制编码），00000001（二进制编码）</li>
<li>帧结束符EOT表示帧的结束：04（十六进制编码），00000100（二进制编码）<br>  <img src="https://z3.ax1x.com/2021/10/12/5nFjPJ.png" alt="控制字符"></li>
</ul>
</li>
<li>若接收端收到不完整的帧（只有开始符SOH而没有结束符EOT）必须丢弃。</li>
</ul>
</li>
<li>透明传输</li>
</ol>
<ul>
<li>“透明”：++某一个实际存在的事物看起来却好像不存在一样++{.wavy}。</li>
<li>透明传输：在数据链路层的透明传输数据，表示无论什么样的比特组合的数据，都能按照原样没有差错地通过数据链路层。大致的意思就是，数据经过数据链路层后不会产生差错，即数据链路层对这些数据来说是透明的。</li>
<li>透明传输问题<ul>
<li>当传送的帧是用文本文件组成的帧时（文本文件中的字符都是从键盘上输入的），其数据部分不会出现帧定界控制字符。数据可以无差错的传输过去，这就是透明传输。</li>
<li>但当数据时非ASCII码的文本文件时，若传输的数据中任何8比特的组合与帧定界的控制字符的比特编码一样，就会出现帧定界的错误。<br>  <img src="https://z3.ax1x.com/2021/10/12/5nZr0x.png" alt="帧定界错误"></li>
</ul>
</li>
<li>解决办法<br>  字节填充&#x2F;字符填充：<ul>
<li>在数据中的控制字符的前面插入++转义字符”ESC”(1B,00011011)++{.wavy}。</li>
<li>若数据中也有转义字符，那么在转义字符前再加一个转义字符，接收端收到连续两个转义字符时，删掉前面的一个。<br>  <img src="https://z3.ax1x.com/2021/10/12/5ne0PS.png" alt="字节填充"></li>
</ul>
</li>
</ul>
<ol start="3">
<li>差错检测</li>
</ol>
<ul>
<li>为什么需要差错检测<ul>
<li>现实中的通信链路不是理想的。比特在传输过程中会出现差错，比如0变成1，1变成0。</li>
<li>误码率：传输错误的比特占传输比特总数的比率。与信噪比有很大的关系。</li>
<li>为保证数据传输的可靠性，必须采用差错检测措施。</li>
</ul>
</li>
<li>循环冗余检验CRC检错技术<ul>
<li>在数据M（k比特）后添加供差错检测的n位冗余码，构成一个帧发出去，共发送（k+n）位。</li>
<li>增大了传输开销，但是可以进行差错检测，是必要的。</li>
</ul>
</li>
<li>计算<ul>
<li>数据M：k比特</li>
<li>被除数：通过<code>模2运算</code>进行$2^n$乘M的运算相当于在数据M后加n个0得到（k+n）位的被除数</li>
<li>除数：收发双方事先商定好的除数P,长度为（n+1）位</li>
<li>冗余码：被除数除以除数求得的余数R作为n位冗余码，称为++帧检验序列FCS++{.wavy}</li>
<li>最后发出去的数据有（k+n）位<br>  <img src="https://z3.ax1x.com/2021/10/12/5nKGJf.png" alt="例子"></li>
<li>接收端对接收到的每一帧经过CRC检验后<ol>
<li>若余数R&#x3D;0,帧没有差错，接收。</li>
<li>若余数R≠0,帧出现差错，丢弃。</li>
</ol>
</li>
<li>关于除数P<ul>
<li>用多项式表示<ul>
<li>ex:P(X)&#x3D;$X^{3}$ + $X^{2}$ + 1代表除数P&#x3D;1101</li>
</ul>
</li>
<li>常用的生成多项式<ul>
<li>CRC-16&#x3D;$X^{16}$ + $X^{15}$ +  $X^{2}$ + 1</li>
<li>CRC-CCITT&#x3D;$X^{15}$ + $X^{12}$ + $X^{5}$ + 1</li>
<li>CRC-32&#x3D;$X^{32}$ + $X^{26}$ + $X^{23}$ + $X^{22}$ + $X^{16}$ + $X^{12}$ + $X^{11}$ + $X^{10}$ + $X^{8}$ + $X^{7}$ + $X^{5}$ + $X^{4}$ + $X^{2}$ + X + 1</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>数据链路层仅仅使用循环冗余检验CRC差错检测技术，只能做到++对帧的无差错接收++，即&#x3D;&#x3D;凡是接收端数据链路层接受的帧，我们都认为这些帧在传输过程中没有产生差错&#x3D;&#x3D;</li>
<li>可靠传输：数据链路层在发送端发送什么，接收端就收到什么。在CRC检错的基础上，再加上帧编号、确认和重传机制。</li>
<li>传输差错<ul>
<li>比特差错</li>
<li>传输差错<ul>
<li>帧丢失</li>
<li>帧重复</li>
<li>帧失序</li>
</ul>
</li>
</ul>
</li>
<li>在数据链路层实现了++无比特差错的传输++，但并不是可靠传输</li>
</ul>
<h2 id="3-2-点对点协议PPP"><a href="#3-2-点对点协议PPP" class="headerlink" title="3.2 点对点协议PPP"></a>3.2 点对点协议PPP</h2><p>通信线路较差的年代，流行的数据链路层协议是++高级数据链路控制HDLC++<br>现在，对于点对点的链路，++点对点协议PPP++使用的最为广泛</p>
<h3 id="3-2-1-PPP协议的特点"><a href="#3-2-1-PPP协议的特点" class="headerlink" title="3.2.1 PPP协议的特点"></a>3.2.1 PPP协议的特点</h3><ul>
<li>PPP协议就是用户计算机和ISP进行通信时所使用的数据链路层协议。</li>
<li>PPP协议在1994年就已经成为互联网的正式标准。<br><img src="https://z3.ax1x.com/2021/10/14/51Zx5n.png" alt="PPP协议"></li>
</ul>
<ol>
<li>PPP协议应满足的需求<ul>
<li>简单：作为首要的需求。提高了不同厂商的互操作性。</li>
<li>封装成帧：必须规定特殊的字符作为++帧定界符++</li>
<li>透明性：必须保证数据传输的透明性。</li>
<li>多种网络协议：在同一条物理链路上同时支持多种网络层协议。</li>
<li>多种类型链路：能够在多种链路上运行</li>
<li>差错检测：必须对接收端接到的帧进行检测，并立即丢弃有差错的帧。</li>
<li>检测连接状态：能够即使自动检测出链路是否处于正常工作状态。</li>
<li>最大传送单元：必须对每一种类型的点对点链路设置++最大传送单元MTU++(数据部分的最大长度)的标准默认值。</li>
<li>网络层地址协商：必须提供一种机制使通信的两个网络层的实体能够通过协商知道或能够配置彼此的网络层地址。</li>
<li>数据压缩协商：必须提供一种方法来协商使用数据压缩算法</li>
</ul>
</li>
<li>PPP不需要的功能<ul>
<li>纠错</li>
<li>设置序号</li>
<li>流量控制</li>
<li>多点链路</li>
<li>单工和半双工链路</li>
</ul>
</li>
<li>PPP协议的组成<ul>
<li>一个将IP数据报封装到串行链路的方法。</li>
<li>链路控制协议LCP:建立、配置和测试数据链路连接。</li>
<li>一套网络控制协议NCP:支持不同的网络层协议。</li>
</ul>
</li>
</ol>
<h3 id="3-2-2-PPP协议的帧格式"><a href="#3-2-2-PPP协议的帧格式" class="headerlink" title="3.2.2 PPP协议的帧格式"></a>3.2.2 PPP协议的帧格式</h3><ol>
<li>各字段的意义<ul>
<li>PPP帧格式如图所示<br> <img src="https://z3.ax1x.com/2021/10/17/5Y3Z38.png" alt="PPP帧格式"></li>
<li>首部四个字段<ul>
<li>第一个字段为标志字符<code>F(Flag)</code>,规定为<code>0x7E</code>(二进制为01111110)，1字节</li>
<li>第二个字段<code>A</code>规定为<code>0xFF</code>(11111111),地址字段，1字节</li>
<li>第三个字段<code>C</code>规定为<code>0x03</code>(00000011),控制字段，1字节</li>
<li>第四个字段为协议字段，2字节</li>
</ul>
</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>协议字段</th>
<th>PPP帧信息字段</th>
</tr>
</thead>
<tbody><tr>
<td>0x0021</td>
<td>IP数据报</td>
</tr>
<tr>
<td>0xC021</td>
<td>PPP链路控制协议LCP的数据</td>
</tr>
<tr>
<td>0x8021</td>
<td>网络层的控制数据</td>
</tr>
</tbody></table>
<ul>
<li>信息字段的长度可变，不超过1500字节。</li>
<li>尾部两个字段</li>
<li>第一个字段是使用&#x3D;&#x3D;CRC的帧检验序列FCS&#x3D;&#x3D;,2字节</li>
<li>第二个字段为标志字符<code>F(Flag)</code>,规定为<code>0x7E</code>(二进制为01111110)，1字节，与首部的第一个字段构成PPP帧的定界符</li>
<li>连续两帧之间只需要用一个标志字段，如果出现两个连续的标志字段，表示这是一个空帧，应当丢弃。</li>
</ul>
<ol start="2">
<li>字节填充<ul>
<li>当信息字段中出现和标志字符<code>0x7E</code>一样的比特组合时，要采取一定的措施使这种比特组合不出现在信息字段中</li>
<li>当PPP使用异步传输（逐个字符传送），转义字符定义为<code>0x7D</code>,RFC1662规定的填充方法：<ul>
<li><code>0x7E</code>→2字节序列<code>(0x7D,0x5E)</code></li>
<li><code>0x7D</code>→2字节序列<code>(0x7D,0x5D)</code></li>
<li>若出现ASCLL码的控制字符（数值小于<code>0x20</code>的字符），则在字符前加入一个<code>0x7D</code>字节<ul>
<li>如<code>0x03</code>(为控制字符<code>ETX</code>代表传输结束)→2字节序列<code>(0x7D,0x23)</code></li>
</ul>
</li>
</ul>
</li>
<li>接收端进行相反的变换，就可以恢复出原来的数据</li>
</ul>
</li>
<li>零比特传输<ul>
<li>PPP协议在使用<code>SONET/SDH</code>链路时，使用同步传输（一连串的比特连续发送），采用零比特填充实现透明传输</li>
<li>具体做法：<ol>
<li>发送端扫描整个信息字段，发现5个连续的1，即在后面填充一个0，以保证不会出现6个连续的1，即不会出现标志字符<code>F(0x7E)</code>的比特组合</li>
<li>接收端首先通过标志字段确定的边界，接着扫描比特流，每当遇到5个连续的1时，删除后面的0<br> <img src="https://z3.ax1x.com/2021/10/17/5YYOS0.png" alt="零比特传输"></li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="3-2-3-PPP协议的工作状态"><a href="#3-2-3-PPP协议的工作状态" class="headerlink" title="3.2.3 PPP协议的工作状态"></a>3.2.3 PPP协议的工作状态</h3><p>PPP链路一开始是怎样被初始化的？</p>
<ul>
<li>简单概述<ol>
<li>用户拨号接入ISP,建立<code>物理连接</code></li>
<li>个人电脑向ISP发送<code>链路控制协议LCP分组(多个PPP帧)</code>,协商将要使用的PPP参数,协商成功后建立<code>LCP连接</code></li>
<li>进行网络层配置，网络控制协议NCP给接入的个人电脑分配一个临时的IP地址</li>
<li>通信结束后，NCP释放网络层连接，收回IP地址；LCP释放数据链路层连接；最后释放物理层的连接<br>  PPP链路的起始和终止状态永远是“链路静止”状态，这是个人电脑和ISP的路由器之间并不存在物理层的连接<br>  <img src="https://z3.ax1x.com/2021/10/17/5Yc3IP.png" alt="PPP协议的状态图"></li>
</ol>
</li>
<li>详细过程<ol>
<li>个人电脑通过调制解调器呼叫路由器时，路由器检测到调制解调器发出的载波信号。双方建立<code>物理连接</code>,PPP进入<code>链接建立(Link Establish)</code>状态，目的是建立++链路层的LCP连接++</li>
<li>LCP开始协商配置选项，发送LCP的<code>配置请求帧(Configure-Request)</code>(PPP帧)<ul>
<li>协议字段为LCP对应的代码</li>
<li>信息字段包含特定的配置请求，LCP配置选项包括：<ul>
<li>链路上的最大帧长</li>
<li>所使用的<code>鉴别协议</code>的规约</li>
<li>不使用PPP帧的地址和控制字段（固定，无信息量，可省略）</li>
</ul>
</li>
<li>另一端的响应<ol>
<li>[配置确认帧(Configure-Ack)]{.aqua}：所有选项都接受</li>
<li>[配置否认帧(Configure-Nak)]{.aqua}：所有选项都理解但不能接受</li>
<li>[配置拒绝帧(Configure-Reject)]{.aqua}：选项有的不能识别或不能接受，需要协商</li>
</ol>
</li>
</ul>
</li>
<li>协商结束后建立LCP链路，进入<code>鉴别(Authentication Protocol)</code>状态<ul>
<li>只允许传送LCP协议的分组、鉴别协议的分组、监测链路质量的分组</li>
<li>若使用<code>口令鉴别协议PAP</code>,需要发起通信的一方发送身份标识符和口令（用户名，密码）</li>
<li>若需要更好安全性，可使用复杂的<code>口令握手鉴别协议CHAP</code></li>
<li>若鉴别身份失败，进入<code>链路终止(Link Terminate)</code>状态；鉴别成功，则进入<code>网络层协议(Network-Layer Protocol)</code>状态</li>
</ul>
</li>
<li>在<code>网络层协议</code>状态，PPP链路两端的<code>网络控制协议NCP</code>根据网络层的不同协议互相交换网络层特定的网络控制分组<ul>
<li>PPP两端的网络层可以允许不同的网络层协议，但仍可以使用同一个PPP协议进行通信</li>
<li>如：若在PPP链路上运行的是IP协议，则对PPP链路的每一端配置<code>IP协议模块</code>时要使用NCP中支持IP的协议<code>IP控制协议IPCP</code><ul>
<li>IPCP分组也封装为PPP帧（协议字段为0x8021）在PPP链路上传送，双方可协商使用压缩的IP和TCP首部，减少发送的比特</li>
</ul>
</li>
</ul>
</li>
<li>网络层配置完毕后，链路就进入了可以进行数据通信的<code>链路打开</code>状态，链路两端可向彼此发送分组，还可发送<code>回送请求LCP分组</code>和<code>回送回答LCP分组</code>检测链路的状态</li>
<li>传输结束后，链路的一端发出<code>终止请求LCP分组</code>，收到另一端的<code>终止确认LCP分组</code>后，转到<code>链路终止</code>状态；若链路发生故障，也转到<code>链路终止</code>状态。当调制解调器的载波停止后，回到<code>链路静止</code>状态</li>
</ol>
</li>
<li>总结：设备之间无链路→建立物理链路→建立链路控制协议LCP链路→经过鉴定后建立网络控制协议NCP链路→交换数据。<br>PPP协议不单单是数据链路层协议，还包含了物理层和网络层的内容</li>
</ul>
<h2 id="3-3-使用广播信道的数据链路层"><a href="#3-3-使用广播信道的数据链路层" class="headerlink" title="3.3 使用广播信道的数据链路层"></a>3.3 使用广播信道的数据链路层</h2><h3 id="3-3-1-局域网的数据链路层"><a href="#3-3-1-局域网的数据链路层" class="headerlink" title="3.3.1 局域网的数据链路层"></a>3.3.1 局域网的数据链路层</h3><ul>
<li>局域网最主要的特点<br>  网络为一个单位所拥有，且地理范围和站点的数目均受限。</li>
<li>局域网的优点<ul>
<li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li>
<li>便于系统的扩展和逐渐的演变，各设备的位置可灵活调制和改变</li>
<li>提高了系统的可靠性、可用性和生存性</li>
</ul>
</li>
<li>局域网按网络拓扑分类<ol>
<li>星型网：由于<code>集线器(hub)</code>的出现，类似结构的局域网以太网广泛应用</li>
<li>环形网</li>
<li>总线网<br>  <img src="https://z3.ax1x.com/2021/10/18/5UjnRf.png" alt="局域网分类"></li>
</ol>
</li>
<li>如何使众多的用户能够合理而方便地共享通信媒体资源？<ul>
<li>静态划分信道<ul>
<li>频分复用</li>
<li>时分复用</li>
<li>码分复用</li>
<li>波分复用<br>  代价较高，不适合于局域网。</li>
</ul>
</li>
<li>动态媒体接入控制<ul>
<li>随机接入：所有用户可随机地发送消息。会产生碰撞，需要解决碰撞的网络协议(CSMA&#x2F;CD)</li>
<li>受控接入：用户发送信息必须受一定的控制。目前在局域网中使用的较少。</li>
</ul>
</li>
</ul>
</li>
<li>以太网的两个标准<ol>
<li>DIX Ethernet V2：由DIX三个公司联合提出并修订，成为世界上第一个局域网产品的规约</li>
<li>IEEE 802.3：是第一个IEEE的以太网标准</li>
</ol>
<ul>
<li>两种标准只有很小的差别，因此很多人把802.3局域网简称为以太网</li>
<li>为了使数据链路层能更好地适应多种局域网标准，IEEE 802委员会把局域网的数据链路层拆成两个子层<ul>
<li>逻辑链路控制LLC(Logical Link Control)子层<ul>
<li>与传输媒体无关</li>
</ul>
</li>
<li>媒体接入控制MAC(Medium Link Control)子层<ul>
<li>存放与接入到传输媒体有关的内容</li>
</ul>
</li>
</ul>
</li>
<li>不管采用何种传输媒体和MAC子层的局域网对LLC子层来说都是透明的<br>  <img src="https://z3.ax1x.com/2021/10/18/5UxG80.png" alt="LLC"></li>
<li>目前使用最多的局域网只剩下DIX Ethernet V2;IEEE802委员会制定的逻辑链路控制子层LLC的作用已经消失了，很多厂商生产的适配器上仅装有MAC协议而没有LLC协议</li>
</ul>
</li>
<li>适配器的作用<ul>
<li>适配器用来计算机与外界局域网进行连接<br>  作用：</li>
</ul>
<ol>
<li>++进行数据串行传输和并行传输的转换++：适配器和局域网之间的通信是通过电缆或双绞线以串行传输方式进行的；适配器和计算机之间的通信是通过计算机主板上的I&#x2F;O总线以并行传输方式进行的。</li>
<li>++对数据进行缓存++：网络上的数据率和计算机总线上的数据率并不相同</li>
<li>++在计算机的操作系统安装设备驱动程序。++</li>
<li>++实现以太网协议。++<br>  <img src="https://z3.ax1x.com/2021/10/18/5UzfyT.png" alt="适配器"></li>
</ol>
</li>
</ul>
<h3 id="3-3-2-CSMA-x2F-CD协议"><a href="#3-3-2-CSMA-x2F-CD协议" class="headerlink" title="3.3.2 CSMA&#x2F;CD协议"></a>3.3.2 CSMA&#x2F;CD协议</h3><ul>
<li>总线的特点<ul>
<li>当一台计算机发送数据时，总线上的所有计算机都能检测到这个数据。这就是广播通信方式。</li>
<li>为了实现一对一通信，可以使每台计算机的适配器都拥有一个不同于其他适配器的地址。</li>
</ul>
</li>
<li>如何实现通信的简便？<ol>
<li>采用无连接的工作方式</li>
<li>发送的数据都使用曼彻斯特编码的信号（缺点是所占的频带宽度比原始的基带信号增加了一倍）</li>
</ol>
</li>
<li>CSMA&#x2F;CD协议：载波监听多点接入&#x2F;碰撞检测<ul>
<li>多点接入：总线型网络。</li>
<li>协议的实质是[载波监听]{.aqua}和[碰撞检测]{.aqua}<ul>
<li>载波监听：边发送边监听。++不管在想要发送数据之前，还是在发送数据之中，每个站必须不停地检测信道++</li>
<li>碰撞检测：适配器边发送数据边检测信道上的信号电压的变化情况。也称冲突检测<ul>
<li>当有主机在总线上发送数据时，总线上的信号电压变化幅度会增大</li>
<li>当信号变化幅度超过一定的门限值时，表明产生了碰撞</li>
<li>一旦总线上出现了碰撞，适配器立即停止发送数据，等待一段随机时间后重新发送</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>为什么要进行碰撞检测？<ul>
<li>++由于电磁波在总线上的传播速率是有限的，++当某个站监听到总线是空闲时，也可能总线++并非真正是空闲的。++ <ul>
<li>A 向 B 发出的信息，要经过一定的时间后才能传送到 B。</li>
<li>B 若在 A 发送的信息到达 B 之前发送自己的帧 (因为这时 B 的载波监听检测不到 A 所发送的信息)，则必然要在某个时间和 A 发送的帧发生碰撞。</li>
<li>碰撞的结果是两个帧都变得无用。所以需要在发送期间进行碰撞检测，以检测冲突。<br>  <img src="https://z3.ax1x.com/2021/10/19/5wX0fI.png" alt="传播时延对载波监听的影响"></li>
</ul>
</li>
<li>在使用CSMA&#x2F;CD协议时，一个站不能同时发送和接收；因此使用CSMA&#x2F;CD协议的以太网不可能进行券商股通信而只能进行++半双工通信++</li>
<li>&#x3D;&#x3D;电磁波在1km电缆的传播时延约为5μs&#x3D;&#x3D;</li>
</ul>
</li>
<li>争用期<ul>
<li>每一个站在自己发送数据之后的一小段时间内，存在着遭遇碰撞的可能性；以太网不能保证在检测到信道空闲后的某一段时间内，一定能把自己的数据帧成功发送出去。称为++发送的不确定性.++</li>
<li>端到端的往返时间2$\tau$为争用期，也称碰撞窗口。</li>
<li>&#x3D;&#x3D;经过争用期这段时间还未检测到碰撞，才能肯定这次发送不会发生碰撞。&#x3D;&#x3D;</li>
<li>具体的争用期时间为51.2μs。对于10Mbit&#x2F;s以太网，在争用期可发送512比特，即64字节。因此也可以说争用期时512&#x3D;&#x3D;比特时间&#x3D;&#x3D;或512&#x3D;&#x3D;比特&#x3D;&#x3D;</li>
</ul>
</li>
<li>阶段二进制指数退避<ul>
<li>++确定碰撞后的重传时机，退避一个随机时间++</li>
<li>如果大家都同时重传，生成最小退避时间的站将最先获得发送权</li>
<li>从离散的整数集合[0,1,…,($2^k$-1)]中随机取出一个数，记为r,重传时间为r倍的争用期。<br>  k&#x3D;Min[重传次数，10];</li>
<li>当重传次数达16次仍不成功，则丢弃此帧，并向高层报告。</li>
</ul>
</li>
<li>最短有效帧长<ul>
<li>若一个站发送一个非常小的帧，在帧到达目的地之前发生了碰撞，而发送方却不知道，不会发起重传，这种情况是我们不希望的。</li>
<li>以太网规定一个最短帧长64字节，即512比特，即在10Mbit&#x2F;s的以太网中，在争用期期间发送的比特数。</li>
<li>若发送的数据非常少，要加入填充字符。</li>
<li>&#x3D;&#x3D;如果在发送了64字节没有发生碰撞，那么后续发送的数据就一定不会发生冲突&#x3D;&#x3D;</li>
<li>&#x3D;&#x3D;凡长度小于64字节的帧都是由于冲突而异常中止的无效帧&#x3D;&#x3D;</li>
<li>&#x3D;&#x3D;最短帧长为信道在争用期发送的字节数&#x3D;&#x3D;</li>
</ul>
</li>
<li>强化碰撞<ul>
<li>当发送数据的站一旦发现发生了碰撞时，除了立即停止发送数据之外，&#x3D;&#x3D;还需要继续发送32比特或48比特的人为干扰信号&#x3D;&#x3D;,以便让所有用户都知道发生了碰撞。</li>
<li>对于10Mbit&#x2F;s以太网，发送32或48比特需要3.2或4.8μs<br>  <img src="https://z3.ax1x.com/2021/10/19/50pWAU.png" alt="人为干扰信号"></li>
<li>总线被占用的时间：$T_B+T_J$+$\tau$</li>
</ul>
</li>
<li>帧间最小间隔为9.6μs，96比特时间。使刚刚收到数据帧的站的接收缓存来得及清理。</li>
<li>CSMA&#x2F;CD的要点<ol>
<li>准备发送。但在发送之前，必须先检测信道。</li>
<li>检测信道。若检测到信道忙，则应不停地检测，一直等待信道转为空闲。若检测到信道空闲，并在 96 比特时间内信道保持空闲（保证了帧间最小间隔），就发送这个帧。</li>
<li>检查碰撞。在发送过程中仍不停地检测信道，即网络适配器要边发送边监听。这里只有两种可能性：<ul>
<li>发送成功：在争用期内一直未检测到碰撞。这个帧肯定能够发送成功。发送完毕后，其他什么也不做。然后回到 1。</li>
<li>发送失败：在争用期内检测到碰撞。这时立即停止发送数据，并按规定发送人为干扰信号。适配器接着就执行指数退避算法，等待 r 倍 512 比特时间(争用期)后，返回到步骤 (2)，继续检测信道。但若重传达 16 次仍不能成功，则停止重传而向上报错。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="3-3-3-使用集线器的星形拓扑"><a href="#3-3-3-使用集线器的星形拓扑" class="headerlink" title="3.3.3 使用集线器的星形拓扑"></a>3.3.3 使用集线器的星形拓扑</h3><ul>
<li>传统以太网最初使用粗同轴电缆，演化到比较便宜的细同轴电缆，最后使用更加便宜和灵活的双绞线</li>
<li>这种以太网采用++星形拓扑++，在星型的中心增加了一种可靠性非常高的设备集线器（hub）</li>
<li>每个站需要用两对无屏蔽双绞线（放在一根电缆里），用于发送和接收，两端使用RJ-45插头</li>
<li>1990年IEEE制定出星形以太网10BASE-T的标准802.3i<ul>
<li>10：10Mbit&#x2F;s数据率</li>
<li>BASE：基带信号</li>
<li>T：双绞线</li>
</ul>
</li>
<li>10BASE-T以太网的通信距离稍短，每个站到集线器的距离不超过100m</li>
<li>10BASE-T双绞线以太网的出现，是局域网发展史上一个重要的里程碑，占据了统治地位</li>
<li>使双绞线能够传送高速数据的主要措施是把双绞线的绞合度做的非常精确<br><img src="https://z3.ax1x.com/2021/10/20/5DIigU.png" alt="使用集线器的双绞线以太网"></li>
<li>集线器的特点<ol>
<li>使用集线器的局域网在物理上是一个星形网，但由于集线器使用电子器件来模拟实际电缆线的工作，因此整个系统仍像传统以太网那样运行。使用集线器的以太网在逻辑上仍然是一个总线网，各站共享逻辑上的总线，使用的还是CSMA&#x2F;CD协议，在同一时刻至多只允许一个站发送数据</li>
<li>一个集线器有许多端口（8至16个，RJ-45插头），像一个多端口的转发器</li>
<li>工作在物理层，不进行碰撞检测</li>
<li>采用了专门的芯片，进行自适应串音回波抵消<br><img src="https://z3.ax1x.com/2021/10/20/5DT96U.png" alt="三个端口的集线器"></li>
</ol>
</li>
<li>IEEE 802.3标准还可使用光纤作为传输媒体，标准为10BASE-F系列，F代表光纤，用作集线器的远程连接</li>
</ul>
<h3 id="3-3-4-以太网的信道利用率"><a href="#3-3-4-以太网的信道利用率" class="headerlink" title="3.3.4 以太网的信道利用率"></a>3.3.4 以太网的信道利用率</h3><ul>
<li>当扣除碰撞所造成的信道损失后，以太网的信道利用率并不能达到100%</li>
<li>一个站在发送帧时出现了碰撞，经过一个争用期2$\tau$后，可能又出现了碰撞，经过了若干个争用期后，一个站就发送成功了</li>
<li>假设发送帧需要的时间为$T_0$,发送时间为帧长除以发送速率<br><img src="https://z3.ax1x.com/2021/10/20/5D7Haj.png" alt="以太网的信道被占用的情况"></li>
<li>发送一个帧需要占用信道的时间是$T_0$+$\tau$,经过$T_0$+$\tau$后以太网的没有才完全进入空闲状态</li>
<li>参数α：以太网单程端到端的时延$\tau$与帧的发送时间$T_0$之比<ul>
<li>α&#x3D; $\frac\tau{T_0}$</li>
<li>要提高以太网的信道利用率，必须减小 $\tau$ 与$T_0$之比</li>
<li>α →0，表示一发生碰撞就立即可以检测出来， 并立即停止发送，因而信道利用率很高。</li>
<li>α 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低。 </li>
<li>为提高利用率，以太网的参数a的值应当尽可能小些。<ul>
<li>对以太网参数 α 的要求是：<ul>
<li>当数据率一定时，以太网的连线的长度受到限制，否则 α 的数值会太大。</li>
<li>以太网的帧长不能太短，否则 $T_0$ 的值会太小，使 α 值太大。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>现在考虑一种理想化情况，假定以太网上的各站发送数据都不会产生碰撞，并且能够非常有效的利用网络的传输资源，即总线一旦空闲就有某一站立即发送数据，这样，发送一帧占用线路的时间是$T_0$ +$\tau$，而帧本身的发送时间是$T_0$ ，我们可以计算出极限信道利用率$S_{max}$为：<ul>
<li><p>$S_{max}&#x3D; \frac{T_0}{T_0+\tau} &#x3D; \frac 1{1+α}$</p>
</li>
<li><p>&#x3D;&#x3D;只有当参数α远小于1才能得到尽可能高的极限信道利用率&#x3D;&#x3D;</p>
</li>
<li><p>当以太网的利用率达到30%时就已经处于++重载++的情况，很多网络容量被网上的碰撞消耗掉了。</p>
</li>
</ul>
</li>
</ul>
<h3 id="3-3-5-以太网的MAC层"><a href="#3-3-5-以太网的MAC层" class="headerlink" title="3.3.5 以太网的MAC层"></a>3.3.5 以太网的MAC层</h3><ol>
<li>MAC层的硬件地址<ul>
<li>硬件地址又称为物理地址或MAC地址</li>
<li>地址就是识别某个系统的一个非常重要的标识符</li>
<li>&#x3D;&#x3D;名字指出我们所要寻找的那个资源，地址指出那个资源在何处，路由告诉我们如何到达该处&#x3D;&#x3D;</li>
<li>名字应当与系统的所在地无关</li>
<li>IEEE802为局域网规定了一种48位的全球地址，即固化在适配器的ROM中的地址<ol>
<li>一台计算机更换了一个适配器，那么这台计算机的“地址”也就变了</li>
<li>一台计算机的地理位置改变，局域网中的“地址”不变</li>
</ol>
</li>
<li>局域网的“地址”应当时每一个站的“名字”或标识符</li>
<li>若一个主机或路由器安装有多个适配器，那么它有多个“地址”，因此实际上，这种48位的“地址”应当是某个接口的标识符</li>
<li>IEEE802标准规定MAC地址字段可采用6字节（48位）或2字节（16位）</li>
<li>48位的MAC地址<ul>
<li>IEEE的注册管理机构RA&#x3D;&#x3D;负责分配地址地段的6个字节的前三个字节&#x3D;&#x3D;，称为++组织唯一标识符OUI++,也叫做公司标识符</li>
<li>后三个字节由厂家自行指派，称为++扩展标识符++</li>
<li>购买一个OUI,就可以生成出2^24个不同的6字节MAC地址，这种地址称为EUI-48，EUI表示扩展的唯一标识符</li>
<li>IEEE规定地址字段的第一字节的最低有效位为&#x3D;&#x3D;I&#x2F;G(Individual&#x2F;Group)&#x3D;&#x3D;位<ul>
<li>I&#x2F;G位为0时，表示一个++单个站地址++</li>
<li>I&#x2F;G位为1时，表示一个++组地址++，用来进行多播</li>
<li>IEEE 802.4标准把最低位写在最左边</li>
</ul>
</li>
<li>所有 48 位都为 1 时，为广播地址。只能作为目的地址使用。</li>
<li>IEEE把地址字段第一字节的第二低位为&#x3D;&#x3D;G&#x2F;L(Global&#x2F;Local)&#x3D;&#x3D;位<ul>
<li>G&#x2F;L位为0时，表示全球管理，厂商向IEEE购买的OUI都属于全球管理</li>
<li>G&#x2F;L位为1时，表示本地管理，用户可以任意分配网络上的地址</li>
</ul>
</li>
</ul>
</li>
<li>适配器检查MAC地址<ul>
<li>适配器有过滤功能，适配器从网络上每收到一个MAC帧就先用硬件检查MAC帧中的目的地址，如果是本站的帧就收下，否则就丢弃</li>
<li>发往本站的帧包括：<ol>
<li>单播帧（一对一）：收到的帧的MAC地址与本站的MAC地址相同</li>
<li>广播帧（一对全体）：即发送给本局域网上所有站点的帧（全1地址）</li>
<li>多播帧（一对多）：发送给本局域网上一部分站点的帧</li>
</ol>
</li>
<li>所有的适配器都至少应当能识别前两种帧，即能够识别单播和广播地址；只有目的地址才能时延广播地址和多播地址</li>
<li>适配器的一种特殊工作方式——混杂方式（嗅探器）<ul>
<li>工作在混杂方式的适配器只要听到以太网上有帧就悄悄接收下来，实际上是“窃听”其他站点的通信而不中断其他站点的通信</li>
<li>双刃剑：<ul>
<li>黑客非法获取网上用户的口令</li>
<li>监视和分析以太网上的流量；帮助学习网络的人更理解各种网络协议的工作原理。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>MAC帧的格式</li>
</ol>
<ul>
<li>两种标准  <ul>
<li>DIX Ethernet V2标准。使用的最多</li>
<li>IEEE 的 802.3 标准<br><img src="https://z3.ax1x.com/2021/10/21/5y0faD.png" alt="MAC帧格式"></li>
</ul>
</li>
<li>五个字段<ul>
<li>第一个字段：目的地址，6字节</li>
<li>第二个字段：源地址，6字节</li>
<li>第三个字段：类型字段（上层使用的协议），2字节<ul>
<li>0x0800:IP数据报</li>
</ul>
</li>
<li>第四个字段：数据字段，长度在46~1500字节（46字节&#x3D;最小长度64字节-18字节的首部和尾部）</li>
<li>第五个字段：帧检验序列FCS,4字节<ul>
<li>当传输媒体的误码率为1×$10^{-8}$时，MAC子层可使未检测到的差错小于1×$10^{-14}$</li>
<li>FCS检验的范围从目的地址到FCS这五个字段</li>
</ul>
</li>
</ul>
</li>
<li>MAC子层如何知道数据部分的长度？<ul>
<li>曼彻斯特编码的每一个码元的正中间一定有一次电压的变化</li>
<li>若帧传送完成，适配器上的接口上的电压也不再发生变化，即找到帧的结束位置</li>
<li>在结束位置往前数4个字节，确定数据字段的结束位置</li>
</ul>
</li>
<li>IP层如何知道有没有填充字节？<ul>
<li>IP协议的首部有一个“总长度”字段</li>
<li>如果“总长度”超过或等于46字节，那么没有填充字节；反之，则有填充字节</li>
</ul>
</li>
<li>物理层插入的8个字节<ul>
<li>两个字段<ul>
<li>第一个字段：前同步码，用来迅速实现 MAC 帧的比特同步。7字节</li>
<li>第二个字段：帧开始定界符，表示后面的信息就是 MAC 帧。1字节</li>
</ul>
</li>
</ul>
</li>
<li>无效的MAC帧<ul>
<li>帧的长度不是整数个字节</li>
<li>FCS查到有差错</li>
<li>数据字段的长度不在46-1500字节之间，MAC帧的长度不在64-1518之间</li>
<li>数据字段的长度与长度字段的值不一致</li>
</ul>
</li>
<li>IEEE 802.3标准MAC帧（与V2的区别）<ol>
<li>(IEEE 802.3 规定的 MAC 帧的第三个字段是“长度 &#x2F; 类型”。<br> 当这个字段值大于 0x0600 时（相当于十进制的1536），就表示“类型”。这样的帧和以太网V2 MAC 帧完全一样。<br> 当这个字段值小于 0x0600 时才表示“长度”。</li>
<li>当“长度&#x2F;类型”字段值小于 0x0600 时，数据字段必须装入上面的逻辑链路控制 LLC 子层的 LLC 帧</li>
</ol>
</li>
</ul>
<h2 id="3-4-扩展的以太网"><a href="#3-4-扩展的以太网" class="headerlink" title="3.4 扩展的以太网"></a>3.4 扩展的以太网</h2><p>&#x3D;&#x3D;我们希望把以太网的范围扩展&#x3D;&#x3D;</p>
<h3 id="3-4-1-在物理层扩展以太网"><a href="#3-4-1-在物理层扩展以太网" class="headerlink" title="3.4.1 在物理层扩展以太网"></a>3.4.1 在物理层扩展以太网</h3><ul>
<li>用光纤扩展<ul>
<li>一对光纤和一对光纤调制解调器<br>  <img src="https://z3.ax1x.com/2021/10/22/5cO6yj.png" alt="主机使用光纤和一对光纤调制解调器连接到集线器"></li>
<li>光纤调制解调器的作用就是进行光信号和电信号的转换，可以很容易地使主机和几公里以外的集线器相连接</li>
</ul>
</li>
<li>用集线器扩展<ul>
<li>用多个集线器，可以连接成覆盖范围更大范围的多级星形结构的以太网</li>
<li>例如，一个学院的三个系各有一个10BASE-T以太网，可通过一个主干集线器把各系的以太网连接起来，成为一个更大的以太网<br>  <img src="https://z3.ax1x.com/2021/10/22/5cXBH1.png"></li>
<li>优点：<ol>
<li>使学院不同系的以太网上的计算机能够跨系通信。实际上三个独立碰撞域变成一个更大的碰撞域。</li>
<li>扩大了以太网覆盖的地理范围</li>
</ol>
</li>
<li>缺点<ol>
<li>碰撞域增大，总吞吐量并未提高</li>
<li>若以太网的数据率不同，则不能用集线器连接起来</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="3-4-2-在数据链路层扩展以太网"><a href="#3-4-2-在数据链路层扩展以太网" class="headerlink" title="3.4.2 在数据链路层扩展以太网"></a>3.4.2 在数据链路层扩展以太网</h3><ul>
<li>最初人们使用网桥对收到的帧根据其MAC帧的目的地址进行转发和过滤</li>
<li>1990年，交换机集线器（第二代交换机）问世，工作在数据链路层，淘汰了网桥</li>
</ul>
<ol>
<li>以太网交换机的特点<ul>
<li>多端口（十几个或更多），级联端口</li>
<li>全双工</li>
<li>具有并行性，可同时连接多对端口，多对主机可同时通信。通信主机&#x3D;&#x3D;独占传输媒体，无碰撞的传输数据&#x3D;&#x3D;</li>
<li>端口具有存储器，可对帧进行缓存</li>
<li>即插即用，通过自[学习算法]{.aqua}建立&#x3D;&#x3D;帧交换表（内容可寻址存储器CAM）&#x3D;&#x3D;</li>
<li>使用专用的交换结构芯片，用硬件转发帧，转发速率高于用软件转发的网桥。</li>
<li>用户独享带宽，增加了总容量</li>
<li>从共享总线以太网转到交换式以太网是，所有接入设备的软件和硬件、适配器等都不需要做任何改动</li>
<li>具有多种速率的端口</li>
<li>交换方式<ol>
<li>大多数采用存储转发方式进行转发</li>
<li>直通<ul>
<li>不对数据帧进行缓存，立即按目的MAC地址绝对帧的转发端口，提高了转发速度</li>
<li>缺点是不检查差错，会转发无效帧到其他站</li>
<li>当需要进行速率匹配、协议转换或差错检测时仍要采用基于软件的存储转发方式进行交换。</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li>以太网交换机的自学习能力<br><img src="https://z3.ax1x.com/2021/11/07/Il57lR.png" alt="建立交换表"></li>
</ol>
<ul>
<li>学习过程<ul>
<li>A-&gt;B</li>
</ul>
<ol>
<li>A 先向 B 发送一帧，从接口 1 进入到交换机。</li>
<li>交换机收到帧后，先查找交换表，没有查到应从哪个接口转发这个帧。</li>
<li>交换机把这个帧的源地址 A 和接口1  写入交换表中，并向除接口1以外的所有的接口广播这个帧。</li>
<li>C 和 D 将丢弃这个帧，因为目的地址不对。只有 B 才收下这个目的地址正确的帧。这也称为过滤。</li>
<li>重新写入交换表的项目 (A, 1) 可以看出，以后不管从哪一个接口收到帧，只要其目的地址是A，就应当把收到的帧从接口1转发出去。</li>
</ol>
<ul>
<li>B-&gt;A</li>
</ul>
<ol>
<li>B 通过接口 3 向 A 发送一帧。</li>
<li>交换机查找交换表，发现交换表中的 MAC 地址有 A。表明要发送给A的帧（即目的地址为 A 的帧）应从接口1转发。于是就把这个帧传送到接口 1 转发给 A。显然，现在已经没有必要再广播收到的帧。</li>
<li>交换表这时新增加的项目 (B, 3)，表明今后如有发送给 B 的帧，就应当从接口 3 转发出去。</li>
<li>经过一段时间后，只要主机 C 和 D 也向其他主机发送帧，以太网交换机中的交换表就会把转发到 C 或 D 应当经过的接口号（2 或 4）写入到交换表中。</li>
</ol>
<ul>
<li>若交换表中给出的接口就是该帧进入交换机的接口，则应丢弃这个帧（因为这时不需要经过交换机进行转发）。</li>
</ul>
</li>
<li>写入时间<ul>
<li>考虑到可能在交换机的端口更换主机，或者主机更换了网络适配器，交换表中的内容会失效，因此，交换表写入一个项目时会记下当前时间，超过设定的时间后被自动删除。交换表实际有三列，MAC地址、端口和写入时间。</li>
</ul>
</li>
<li>生成树协议STP<ul>
<li>增加冗余链路时，自学习过程可能导致以太网帧在网络的某个链路无限制的兜圈子<br>  <img src="https://z3.ax1x.com/2021/11/07/IloXJe.png" alt="兜圈子"></li>
<li>如图，假定开始时，交换机 #1 和 #2 的交换表都是空的，主机 A 通过接口交换机  #1 向主机 B 发送一帧。</li>
<li>按交换机自学习和转发方法，该帧的某个走向如下：离开交换机 #1 的接口 3 → 交换机 #2 的接口 1 → 接口 2 → 交换机 #1 的接口 4 → 接口 3 → 交换机 #2 的接口 1 →……。</li>
<li>这样就无限制地循环兜圈子下去，白白消耗了网络资源。</li>
<li>为解决这种问题，IEEE的802.1D标准制定了&#x3D;&#x3D;生成树协议STP&#x3D;&#x3D;<ul>
<li>要点：不改变网络的实际拓扑，在逻辑上切断某些链路，使得从一台主机到所有其他主机的路径是无环路的树状结构，从而消除了兜圈子现象</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>从总线以太网到星形以太网<ul>
<li>早期，采用无源的总线结构 <ul>
<li>使用CSMA&#x2F;CD协议，以半双工方式工作</li>
</ul>
</li>
<li>以太网交换机的星形拓扑成为以太网的首选拓扑<ul>
<li>不使用共享总线，因此不使用CSMA&#x2F;CD协议，以全双工方式工作</li>
<li>帧结构未改变，仍然采用以太网的帧结构</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="3-4-3-虚拟局域网"><a href="#3-4-3-虚拟局域网" class="headerlink" title="3.4.3 虚拟局域网"></a>3.4.3 虚拟局域网</h3><ul>
<li>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)。</li>
<li>虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。</li>
<li>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</li>
<li>由于虚拟局域网是用户和网络资源的逻辑组合，因此可按照需要将有关设备和资源非常方便地重新组合，使用户从不同的服务器或数据库中存取所需的资源。<br><img src="https://z3.ax1x.com/2021/11/07/I1yRf0.png" alt="虚拟局域网"></li>
<li>如图10 台计算机划分为三个虚拟局域网： VLAN1, VLAN2 和 VLAN3</li>
<li>当 B1 向 VLAN2 工作组内成员发送数据时，工作站 B2 和 B3 将会收到广播的信息。</li>
<li>B1 发送数据时，工作站 A1，A2 和 C1都不会收到 B1 发出的广播信息。 </li>
<li>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息(即“广播风暴”)而引起性能恶化。</li>
<li>802.1Q 帧<br><img src="https://z3.ax1x.com/2021/11/07/I1yeoR.png" alt="802.1Q"></li>
<li>IEEE 批准了 802.3ac 标准，该标准定义了以太网的帧格式的扩展，以支持虚拟局域网。</li>
<li>虚拟局域网协议允许在以太网的帧格式中插入一个4字节的标识符，称为 VLAN 标记 (tag)，用来指明发送该帧的计算机属于哪一个虚拟局域网。</li>
<li>插入 VLAN 标记得出的帧称为 802.1Q 帧 或 带标记的以太网帧。</li>
</ul>
<h2 id="3-5-高速以太网"><a href="#3-5-高速以太网" class="headerlink" title="3.5 高速以太网"></a>3.5 高速以太网</h2><h3 id="3-5-1-100BASE-T以太网"><a href="#3-5-1-100BASE-T以太网" class="headerlink" title="3.5.1 100BASE-T以太网"></a>3.5.1 100BASE-T以太网</h3><ul>
<li>速率达到或超过 100 Mbit&#x2F;s 的以太网称为高速以太网。</li>
<li>100BASE-T 在双绞线上传送 100 Mbit&#x2F;s 基带信号的星形拓扑以太网，仍使用 IEEE 802.3 的CSMA&#x2F;CD 协议。</li>
<li>100BASE-T 以太网又称为快速以太网 (Fast Ethernet)。</li>
<li>1995 年IEEE已把 100BASE-T 的快速以太网定为正式标准，其代号为 IEEE 802.3u。</li>
<li>特点<ul>
<li>可在全双工方式下工作而无冲突发生。在全双工方式下工作时，不使用 CSMA&#x2F;CD 协议。</li>
<li>MAC 帧格式仍然是 802.3 标准规定的。</li>
<li>保持最短帧长不变，但将一个网段的最大电缆长度减小到 100 m。</li>
<li>帧间时间间隔从原来的 9.6 μs 改为现在的 0.96 μs。<br><img src="https://z3.ax1x.com/2021/11/07/I16yjO.png"></li>
</ul>
</li>
</ul>
<h3 id="3-5-2-吉比特以太网"><a href="#3-5-2-吉比特以太网" class="headerlink" title="3.5.2 吉比特以太网"></a>3.5.2 吉比特以太网</h3><ul>
<li>允许在 1 Gbit&#x2F;s 下全双工和半双工两种方式工作。</li>
<li>使用 IEEE 802.3 协议规定的帧格式。</li>
<li>在半双工方式下使用 CSMA&#x2F;CD 协议，全双工方式不使用 CSMA&#x2F;CD 协议。</li>
<li>与 10BASE-T 和 100BASE-T 技术向后兼容。</li>
<li>吉比特以太网可用作现有网络的主干网，也可在高带宽（高速率）的应用场合中。</li>
<li>吉比特以太网的物理层 ,两种成熟的技术：    <ul>
<li>一种来自现有的以太网，</li>
<li>另一种则是美国国家标准协会 <code>ANSI </code>制定的光纤通道 <code>FC  (Fiber Channel)</code>。<br><img src="https://z3.ax1x.com/2021/11/07/I16OEj.png"></li>
</ul>
</li>
<li>吉比特以太网工作在半双工方式时，就必须进行碰撞检测。</li>
<li>为保持 64 字节最小帧长度，以及 100 米的网段的最大长度，吉比特以太网增加了两个功能：<ul>
<li>载波延伸 (carrier extension)<ul>
<li>使最短帧长仍为 64 字节（这样可以保持兼容性），同时将争用时间增大为 512 字节。</li>
<li>凡发送的 MAC 帧长不足 512 字节时，就用一些特殊字符填充在帧的后面，使MAC 帧的发送长度增大到 512 字节。接收端在收到以太网的 MAC 帧后，要将所填充的特殊字符删除后才向高层交付。<br>  <img src="https://z3.ax1x.com/2021/11/07/I1cMrD.png" alt="载波延伸"></li>
</ul>
</li>
<li>分组突发 (packet bursting)<ul>
<li>当很多短帧要发送时，第一个短帧要采用载波延伸方法进行填充，随后的一些短帧则可一个接一个地发送，只需留有必要的帧间最小间隔即可。这样就形成可一串分组的突发，直到达到 1500 字节或稍多一些为止。<br>  <img src="https://z3.ax1x.com/2021/11/07/I1cwqg.png" alt="分组突发"></li>
</ul>
</li>
</ul>
</li>
<li>当吉比特以太网工作在全双工方式时（即通信双方可同时进行发送和接收数据），不使用载波延伸和分组突发。<br><img src="https://z3.ax1x.com/2021/11/07/I1cRMT.png" alt="配置举例"></li>
</ul>
<h3 id="3-5-3-10吉比特以太网和更快的以太网"><a href="#3-5-3-10吉比特以太网和更快的以太网" class="headerlink" title="3.5.3 10吉比特以太网和更快的以太网"></a>3.5.3 10吉比特以太网和更快的以太网</h3><ul>
<li>10 吉比特以太网的物理层<ul>
<li>10 吉比特以太网（10GE）并非把吉比特以太网的速率简单地提高到10倍，其主要特点有：<ul>
<li>与 10 Mbit&#x2F;s、100 Mbit&#x2F;s 和 1 Gbit&#x2F;s 以太网的帧格式完全相同。</li>
<li>保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。</li>
<li>不再使用铜线而只使用光纤作为传输媒体。</li>
<li>只工作在全双工方式，因此没有争用问题，也不使用 CSMA&#x2F;CD 协议。<br><img src="https://z3.ax1x.com/2021/11/07/I1giSP.png"></li>
</ul>
</li>
</ul>
</li>
<li>更快的以太网<ul>
<li>以太网的技术发展得很快。</li>
<li>在 10GE 之后又制订了 40GE&#x2F;100GE（即 40 吉比特以太网和 100 吉比特以太网）的标准 IEEE 802.3ba-2010 和 802.3bm-2015。</li>
<li>40GE&#x2F;100GE 只工作在全双工的传输方式（因而不使用 CSMA&#x2F;CD协议），并仍保持了以太网的帧格式以及 802.3 标准规定的以太网最小和最大帧长。</li>
<li>100GE 在使用单模光纤传输时，仍然可以达到 40 km的传输距离，但这是需要波分复用（使用 4 个波长复用一根光纤，每一个波长的有效传输速率是 25 Gbits&#x2F;s）<br><img src="https://z3.ax1x.com/2021/11/07/I1gYTJ.png"></li>
</ul>
</li>
<li>端到端的以太网传输 <ul>
<li>以太网的工作范围已经从局域网（校园网、企业网）扩大到城域网和广域网，从而实现了端到端的以太网传输。</li>
<li>这种工作方式的好处有： <ul>
<li>技术成熟；</li>
<li>互操作性很好；</li>
<li>在广域网中使用以太网时价格便宜；</li>
<li>采用统一的以太网帧格式，简化了操作和管理。</li>
</ul>
</li>
</ul>
</li>
<li>以太网从 10 Mbit&#x2F;s 到 100 Gbit&#x2F;s 的演进证明了以太网是：<ul>
<li>可扩展的（从 10 Mbit&#x2F;s 到 100 Gbit&#x2F;s）；</li>
<li>灵活的（多种传输媒体、全&#x2F;半双工、共享&#x2F;交换）；</li>
<li>易于安装；</li>
<li>稳健性好。</li>
</ul>
</li>
</ul>
<h3 id="3-5-4-使用以太网进行宽带接入"><a href="#3-5-4-使用以太网进行宽带接入" class="headerlink" title="3.5.4 使用以太网进行宽带接入"></a>3.5.4 使用以太网进行宽带接入</h3><ul>
<li>IEEE 在 2001 年初成立了 802.3EFM 工作组，专门研究高速以太网的宽带接入技术问题。</li>
<li>以太网宽带接入具有以下特点：<ul>
<li>可以提供双向的宽带通信。</li>
<li>可以根据用户对带宽的需求灵活地进行带宽升级。</li>
<li>可以实现端到端的以太网传输，中间不需要再进行帧格式的转换。这就提高了数据的传输效率且降低了传输的成本。</li>
<li>但是不支持用户身份鉴别。</li>
</ul>
</li>
<li>PPPoE<ul>
<li>PPPoE (PPP over Ethernet) 的意思是“在以太网上运行 PPP”，它把 PPP 协议与以太网协议结合起来 —— 将 PPP 帧再封装到以太网中来传输。</li>
<li>现在的光纤宽带接入 FTTx 都要使用 PPPoE 的方式进行接入。在 PPPoE 弹出的窗口中键入在网络运营商购买的用户名和密码，就可以进行宽带上网了。</li>
<li>利用 ADSL 进行宽带上网时，从用户个人电脑到家中的 ADSL 调制解调器之间，也是使用 RJ-45 和 5 类线（即以太网使用的网线）进行连接的，并且也是使用 PPPoE 弹出的窗口进行拨号连接的。</li>
</ul>
</li>
</ul>
<h1 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h1><p><img src="https://z3.ax1x.com/2021/11/07/I1H16H.png"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://lollipopazhe.github.io">Azhe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lollipopazhe.github.io/2021/10/17/study/network/chapter03/">https://lollipopazhe.github.io/2021/10/17/study/network/chapter03/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lollipopazhe.github.io" target="_blank">Azhe</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.png" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/alipay.png" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/10/29/study/c/practice02/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">C语言编程题02</div></div></a></div><div class="next-post pull-right"><a href="/2021/10/12/study/c/chapter03/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Chapter03-语法结构</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/08/30/study/network/chapter01/" title="Chapter01-概述"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-30</div><div class="title">Chapter01-概述</div></div></a></div><div><a href="/2021/11/08/study/network/chapter04/" title="Chapter04-网络层"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-08</div><div class="title">Chapter04-网络层</div></div></a></div><div><a href="/2021/09/13/study/network/chapter02/" title="Chapter02-物理层"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-13</div><div class="title">Chapter02-物理层</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s1.ax1x.com/2022/10/11/xtHdw4.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Azhe</div><div class="author-info__description">杂记</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LollipopAzhe" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">3.1 使用点对点信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7"><span class="toc-number">2.1.</span> <span class="toc-text">3.1.1 数据链路和帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">2.2.</span> <span class="toc-text">3.1.2 三个基本问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP"><span class="toc-number">3.</span> <span class="toc-text">3.2 点对点协议PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.1.</span> <span class="toc-text">3.2.1 PPP协议的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">3.2.2 PPP协议的帧格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-PPP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"><span class="toc-number">3.3.</span> <span class="toc-text">3.2.3 PPP协议的工作状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">3.3 使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">4.1.</span> <span class="toc-text">3.3.1 局域网的数据链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-CSMA-x2F-CD%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.2.</span> <span class="toc-text">3.3.2 CSMA&#x2F;CD协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91"><span class="toc-number">4.3.</span> <span class="toc-text">3.3.3 使用集线器的星形拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">4.4.</span> <span class="toc-text">3.3.4 以太网的信道利用率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84MAC%E5%B1%82"><span class="toc-number">4.5.</span> <span class="toc-text">3.3.5 以太网的MAC层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.</span> <span class="toc-text">3.4 扩展的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.1.</span> <span class="toc-text">3.4.1 在物理层扩展以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">5.2.</span> <span class="toc-text">3.4.2 在数据链路层扩展以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.3.</span> <span class="toc-text">3.4.3 虚拟局域网</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">6.</span> <span class="toc-text">3.5 高速以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-100BASE-T%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">6.1.</span> <span class="toc-text">3.5.1 100BASE-T以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">6.2.</span> <span class="toc-text">3.5.2 吉比特以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3-10%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">6.3.</span> <span class="toc-text">3.5.3 10吉比特以太网和更快的以太网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4-%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5"><span class="toc-number">6.4.</span> <span class="toc-text">3.5.4 使用以太网进行宽带接入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE"><span class="toc-number"></span> <span class="toc-text">思维导图</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/10/10/hello-world/" title="Hello World"><img src="https://s1.ax1x.com/2022/10/11/xtHdw4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2022/10/10/hello-world/" title="Hello World">Hello World</a><time datetime="2022-10-10T11:34:10.412Z" title="发表于 2022-10-10 19:34:10">2022-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/24/study/c/exam/" title="C++期末复习题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++期末复习题"/></a><div class="content"><a class="title" href="/2021/11/24/study/c/exam/" title="C++期末复习题">C++期末复习题</a><time datetime="2021-11-24T02:15:32.000Z" title="发表于 2021-11-24 10:15:32">2021-11-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/22/study/java/exam/" title="Java期末复习题"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java期末复习题"/></a><div class="content"><a class="title" href="/2021/11/22/study/java/exam/" title="Java期末复习题">Java期末复习题</a><time datetime="2021-11-22T13:33:32.000Z" title="发表于 2021-11-22 21:33:32">2021-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/13/study/c/practice03/" title="C语言编程题03"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C语言编程题03"/></a><div class="content"><a class="title" href="/2021/11/13/study/c/practice03/" title="C语言编程题03">C语言编程题03</a><time datetime="2021-11-13T11:26:32.000Z" title="发表于 2021-11-13 19:26:32">2021-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/08/study/network/chapter04/" title="Chapter04-网络层"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Chapter04-网络层"/></a><div class="content"><a class="title" href="/2021/11/08/study/network/chapter04/" title="Chapter04-网络层">Chapter04-网络层</a><time datetime="2021-11-08T07:34:32.000Z" title="发表于 2021-11-08 15:34:32">2021-11-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 By Azhe</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://wkk-api-lollipopazhe.vercel.app/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://wkk-api-lollipopazhe.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>